<!DOCTYPE HTML>
<html>
<head>
<!--
<meta http-equiv="refresh" content="5" />
-->
	<title>Установка термометров</title>
	<script type=text/javascript>
	var statusString = ['???','Включен','Выключен'];
%TEMPLATE_START%
	var currTemp=%CurrentTemperature%;
	var desTemp =%DesiredTemperature%;
	var dt=%CurrentTime%;
	var labels = %SensorsLabel%;
	var types = %SensorsType%;
	var codes = %SensorsCode%;
	var value = %SensorsValue%;
	var errors = %SensorsError%;
	var lowerRange = %SensorsLowerRange%;
	var upperRange = %SensorsUpperRange%;
	var desTemp =%DesiredTemperature%;
	var dt=%CurrentTime%;
	var compressor=statusString[%CompressorStatus%];
	var pLabels = %PumpsLabel%;
    var pStatus = %PumpsStatus%;
    var mac = %SensorsMAC%;
%TEMPLATE_END%

var submitCounter =0;
var isEdit = 0;

/*	
setInterval(function(){
	if (isEdit==1) {submitCounter++;}
	if (isEdit==0 || submitCounter>=10) {window.location.reload(1);}
}, 5000);
*/	
	
function createTempRows() {
	//var errorString = ['ND','НИЗКАЯ','СТАРТ Н', '','ВЫСОКАЯ', 'СТАРТ В'];
	var tbl = document.getElementById('tempTable');
	if (tbl) {
		var ind = tbl.rows.length;
		for (i=0; i< labels.length; i++) {
			var row = tbl.insertRow(ind+i);
			row.insertCell(0).innerHTML=decodeURI(labels[i]);
			row.insertCell(1).innerHTML=codes[i];
			row.insertCell(2).innerHTML=value[i];
            row.insertCell(3).innerHTML = mac[i];
		}
	}	
};
	
document.addEventListener( "DOMContentLoaded", function() {
	createTempRows();
}, false );

function noRefresh() {
	isEdit = 1;
	submitCounter =0;
}

	</script>
	<style type="text/css">
		div {display:inline;}
		.rangeValue {width:50px;}
		.wideControl {width: 100%;}
		table, td, th { border: 1px solid gray }
		.c1 {background-color: red;}
		.c2 {background-color: green;}
		.text1 {font: 2.5em normal;}
	</style>
	
</head>
<body>
<form method="post">
<h3>Температурные Датчики</h3>
<table id="tempTable" name="tempTable">
	<tr>
		<th>Название</th>
		<th>Код</th>
		<th>Текущее<br/>значение</th>
        <th>Адрес</th>
	</tr>
</table>
	<input type="button" id="editButton" value="Редактировать" onclick="noRefresh()">
	<input type="submit" class="editable" value="Сохранить">

</form>
</body>	
</html>